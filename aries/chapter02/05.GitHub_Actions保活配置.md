# GitHub Actions è‡ªåŠ¨ä¿æ´»é…ç½®æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ¯ 10 åˆ†é’Ÿ ping ä¸€æ¬¡ Render éƒ¨ç½²çš„æœåŠ¡ï¼Œé˜²æ­¢ Render å…è´¹å®ä¾‹å›  15 åˆ†é’Ÿæ— è®¿é—®è€Œè‡ªåŠ¨ä¼‘çœ ã€‚

**é…ç½®æ–‡ä»¶ä½ç½®**ï¼š`.github/workflows/keepalive.yml`

---

## âœ… å·²é…ç½®åŠŸèƒ½

### 1. è‡ªåŠ¨å®šæ—¶ä»»åŠ¡
- **æ‰§è¡Œé¢‘ç‡**ï¼šæ¯ 10 åˆ†é’Ÿä¸€æ¬¡
- **Cron è¡¨è¾¾å¼**ï¼š`*/10 * * * *`
- **24 å°æ—¶è¿è¡Œ**ï¼šå…¨å¤©å€™è‡ªåŠ¨æ‰§è¡Œï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„

### 2. æ‰‹åŠ¨è§¦å‘æ”¯æŒ
- **ä½ç½®**ï¼šGitHub ä»“åº“ â†’ Actions â†’ Keep Render Service Alive â†’ Run workflow
- **ç”¨é€”**ï¼šç«‹å³å”¤é†’æœåŠ¡ï¼Œæ— éœ€ç­‰å¾…ä¸‹æ¬¡å®šæ—¶ä»»åŠ¡

### 3. æ™ºèƒ½å¥åº·æ£€æŸ¥
- **ç«¯ç‚¹**ï¼š`https://kiro-travel.onrender.com/api/health`
- **å“åº”è¯†åˆ«**ï¼š
  - âœ… HTTP 200ï¼šæœåŠ¡æ­£å¸¸è¿è¡Œ
  - âš ï¸ HTTP 000ï¼šæœåŠ¡å¯èƒ½æ­£åœ¨å¯åŠ¨ï¼ˆé¦–æ¬¡ ping æ­£å¸¸ç°è±¡ï¼‰
  - âš ï¸ å…¶ä»–çŠ¶æ€ç ï¼šè®°å½•å¼‚å¸¸å“åº”

### 4. è¯¦ç»†æ—¥å¿—
- æ¯æ¬¡ ping è®°å½•æ—¶é—´æˆ³
- æ˜¾ç¤º HTTP å“åº”çŠ¶æ€ç 
- å¤±è´¥æ—¶ä¸ä¼šä¸­æ–­åç»­æ‰§è¡Œ

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### è‡ªåŠ¨å¯ç”¨ï¼ˆé»˜è®¤ï¼‰

é…ç½®æ–‡ä»¶æ¨é€åˆ° GitHub åï¼ŒGitHub Actions ä¼š**è‡ªåŠ¨å¯ç”¨**å®šæ—¶ä»»åŠ¡ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ã€‚

### æŸ¥çœ‹æ‰§è¡Œå†å²

1. è®¿é—®ä½ çš„ GitHub ä»“åº“
2. ç‚¹å‡» **Actions** æ ‡ç­¾
3. é€‰æ‹© **Keep Render Service Alive** å·¥ä½œæµ
4. æŸ¥çœ‹æ‰€æœ‰æ‰§è¡Œè®°å½•å’Œæ—¥å¿—

![GitHub Actions ç¤ºä¾‹](https://docs.github.com/assets/images/help/repository/actions-tab.png)

### æ‰‹åŠ¨è§¦å‘

å¦‚æœéœ€è¦ç«‹å³å”¤é†’æœåŠ¡ï¼š

1. è¿›å…¥ **Actions** â†’ **Keep Render Service Alive**
2. ç‚¹å‡»å³ä¾§ **Run workflow** æŒ‰é’®
3. é€‰æ‹©åˆ†æ”¯ï¼ˆé»˜è®¤ `master`ï¼‰
4. ç‚¹å‡»ç»¿è‰² **Run workflow** æŒ‰é’®

---

## ğŸ“Š é…ç½®è¯¦è§£

### Cron å®šæ—¶ä»»åŠ¡

```yaml
schedule:
  # æ¯ 10 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡
  - cron: '*/10 * * * *'
```

**ä¸ºä»€ä¹ˆæ˜¯ 10 åˆ†é’Ÿï¼Ÿ**
- Render å…è´¹å®ä¾‹åœ¨ **15 åˆ†é’Ÿ**æ— è®¿é—®åä¼‘çœ 
- 10 åˆ†é’Ÿé—´éš”ç¡®ä¿æœåŠ¡å§‹ç»ˆä¿æŒå”¤é†’
- GitHub Actions æœ€çŸ­æ”¯æŒ **5 åˆ†é’Ÿ**é—´éš”ï¼ˆæˆ‘ä»¬é€‰æ‹© 10 åˆ†é’Ÿä»¥èŠ‚çœé…é¢ï¼‰

**Cron è¡¨è¾¾å¼è¯´æ˜**ï¼š
```
*/10 * * * *
â”‚    â”‚ â”‚ â”‚ â”‚
â”‚    â”‚ â”‚ â”‚ â””â”€ æ˜ŸæœŸå‡  (0-6, 0=å‘¨æ—¥)
â”‚    â”‚ â”‚ â””â”€â”€â”€ æœˆä»½ (1-12)
â”‚    â”‚ â””â”€â”€â”€â”€â”€ æ—¥æœŸ (1-31)
â”‚    â””â”€â”€â”€â”€â”€â”€â”€ å°æ—¶ (0-23)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ†é’Ÿ (0-59)

*/10 è¡¨ç¤ºæ¯ 10 åˆ†é’Ÿ
```

### Ping è„šæœ¬

```bash
# Ping å¥åº·æ£€æŸ¥ç«¯ç‚¹
response=$(curl -s -o /dev/null -w "%{http_code}" https://kiro-travel.onrender.com/api/health || echo "000")

if [ "$response" = "200" ]; then
  echo "âœ… Service is alive! HTTP Status: $response"
elif [ "$response" = "000" ]; then
  echo "âš ï¸ Service might be sleeping or starting up, this is normal for first ping"
else
  echo "âš ï¸ Unexpected response: HTTP Status: $response"
fi
```

**å‚æ•°è¯´æ˜**ï¼š
- `-s`ï¼šé™é»˜æ¨¡å¼ï¼Œä¸æ˜¾ç¤ºè¿›åº¦
- `-o /dev/null`ï¼šä¸¢å¼ƒå“åº”å†…å®¹ï¼Œåªè·å–çŠ¶æ€ç 
- `-w "%{http_code}"`ï¼šè¾“å‡º HTTP çŠ¶æ€ç 
- `|| echo "000"`ï¼šå¦‚æœ curl å¤±è´¥ï¼ˆç½‘ç»œé”™è¯¯ã€è¶…æ—¶ï¼‰ï¼Œè¿”å› "000"

---

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹ Ping é¢‘ç‡

**æ›´é¢‘ç¹ï¼ˆæ¯ 5 åˆ†é’Ÿï¼‰**ï¼š
```yaml
schedule:
  - cron: '*/5 * * * *'  # æ¯ 5 åˆ†é’Ÿ
```

**æ›´èŠ‚çœï¼ˆæ¯ 14 åˆ†é’Ÿï¼‰**ï¼š
```yaml
schedule:
  - cron: '*/14 * * * *'  # æ¯ 14 åˆ†é’Ÿï¼ˆæ¥è¿‘ 15 åˆ†é’Ÿä¼‘çœ é˜ˆå€¼ï¼‰
```

> âš ï¸ **æ³¨æ„**ï¼šä¸å»ºè®®è¶…è¿‡ 14 åˆ†é’Ÿï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡ä¼‘çœ 

### ä¿®æ”¹ç›®æ ‡ URL

å¦‚æœä½ çš„ Render æœåŠ¡ URL ä¸åŒï¼Œä¿®æ”¹ä»¥ä¸‹è¡Œï¼š

```yaml
- name: Ping Render Service
  run: |
    response=$(curl -s -o /dev/null -w "%{http_code}" https://your-app.onrender.com/api/health || echo "000")
```

æ›¿æ¢ `https://your-app.onrender.com/api/health` ä¸ºä½ çš„å®é™… URLã€‚

### æ·»åŠ å¤šä¸ªæœåŠ¡

å¦‚æœä½ æœ‰å¤šä¸ª Render æœåŠ¡éœ€è¦ä¿æ´»ï¼š

```yaml
- name: Ping Multiple Services
  run: |
    # æœåŠ¡ 1
    echo "ğŸ”„ Pinging Service 1..."
    curl -f https://service1.onrender.com/api/health || echo "Service 1 ping failed"

    # æœåŠ¡ 2
    echo "ğŸ”„ Pinging Service 2..."
    curl -f https://service2.onrender.com/api/health || echo "Service 2 ping failed"

    # æœåŠ¡ 3
    echo "ğŸ”„ Pinging Service 3..."
    curl -f https://service3.onrender.com/api/health || echo "Service 3 ping failed"
```

---

## ğŸ“ˆ GitHub Actions å…è´¹é¢åº¦

| é¡¹ç›® | å…è´¹é¢åº¦ | æœ¬é¡¹ç›®ä½¿ç”¨é‡ |
|------|---------|------------|
| æ‰§è¡Œæ—¶é—´ | 2000 åˆ†é’Ÿ/æœˆ | ~30 åˆ†é’Ÿ/æœˆ |
| å­˜å‚¨ç©ºé—´ | 500 MB | < 1 MB |
| å¹¶å‘ä»»åŠ¡ | 20 ä¸ª | 1 ä¸ª |
| ç§æœ‰ä»“åº“ | âœ… æ”¯æŒ | âœ… æ”¯æŒ |

**æ¯æœˆä½¿ç”¨é‡ä¼°ç®—**ï¼š
```
6 æ¬¡/å°æ—¶ Ã— 24 å°æ—¶ Ã— 30 å¤© = 4320 æ¬¡ ping
æ¯æ¬¡æ‰§è¡Œçº¦ 10 ç§’ = 4320 Ã— 10 ç§’ â‰ˆ 12 å°æ—¶ â‰ˆ 720 åˆ†é’Ÿ
```

> âœ… **ç»“è®º**ï¼šå®Œå…¨åœ¨å…è´¹é¢åº¦å†…ï¼Œæ— éœ€æ‹…å¿ƒè¶…é¢

---

## ğŸ›¡ï¸ æœ€ä½³å®è·µ

### 1. ç»„åˆä½¿ç”¨å¤šç§æ–¹æ¡ˆ

**æ¨èé…ç½®**ï¼šGitHub Actions + UptimeRobot

```
GitHub Actions (æ¯ 10 åˆ†é’Ÿ)  â”€â”€â”€â”€â”
                                  â”œâ”€â”€â–º Render æœåŠ¡ä¿æŒå”¤é†’
UptimeRobot (æ¯ 5 åˆ†é’Ÿ)     â”€â”€â”€â”€â”˜
```

**ä¼˜åŠ¿**ï¼š
- âœ… åŒé‡ä¿éšœï¼Œä¸€ä¸ªå¤±è´¥å¦ä¸€ä¸ªæ¥ç®¡
- âœ… UptimeRobot æä¾›å¯è§†åŒ–ç›‘æ§é¢æ¿
- âœ… GitHub Actions æä¾›è¯¦ç»†æ—¥å¿—

### 2. ç›‘æ§ Actions æ‰§è¡ŒçŠ¶æ€

**è®¾ç½®é€šçŸ¥**ï¼š
1. GitHub ä»“åº“ â†’ Settings â†’ Notifications
2. å‹¾é€‰ "Send notifications for failed workflows"
3. å¤±è´¥æ—¶è‡ªåŠ¨é‚®ä»¶é€šçŸ¥

### 3. å®šæœŸæ£€æŸ¥æ—¥å¿—

**æ¯å‘¨æ£€æŸ¥ä¸€æ¬¡**ï¼š
1. è®¿é—® Actions æ ‡ç­¾
2. æŸ¥çœ‹æœ€è¿‘æ‰§è¡Œè®°å½•
3. ç¡®è®¤æˆåŠŸç‡ > 95%

---

## â“ å¸¸è§é—®é¢˜

### Q1: Actions ä¸ºä»€ä¹ˆä¼šè·³è¿‡æ‰§è¡Œï¼Ÿ

**A**: GitHub Actions å¯èƒ½ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè·³è¿‡ï¼š
- ä»“åº“é•¿æ—¶é—´æ— æ´»åŠ¨ï¼ˆè¶…è¿‡ 60 å¤©ï¼‰
- å·¥ä½œæµæ–‡ä»¶æœ‰è¯­æ³•é”™è¯¯
- GitHub Actions æœåŠ¡æ•…éšœ

**è§£å†³æ–¹æ³•**ï¼š
1. å®šæœŸå‘ä»“åº“æ¨é€ä»£ç ï¼ˆè‡³å°‘ 60 å¤©ä¸€æ¬¡ï¼‰
2. ä½¿ç”¨ `workflow_dispatch` æ‰‹åŠ¨è§¦å‘æµ‹è¯•
3. æ£€æŸ¥ Actions é¡µé¢çš„è­¦å‘Šä¿¡æ¯

### Q2: ä¸ºä»€ä¹ˆæœ‰æ—¶è¿”å› HTTP 000ï¼Ÿ

**A**: è¿™é€šå¸¸è¡¨ç¤ºæœåŠ¡æ­£åœ¨å¯åŠ¨ï¼ˆå†·å¯åŠ¨ï¼‰ï¼š
- Render å…è´¹å®ä¾‹ä¼‘çœ åï¼Œé¦–æ¬¡è®¿é—®éœ€è¦ 30-60 ç§’å¯åŠ¨
- curl è¯·æ±‚è¶…æ—¶ï¼ˆé»˜è®¤ç­‰å¾…æ—¶é—´å¯èƒ½ä¸å¤Ÿï¼‰
- ç½‘ç»œæš‚æ—¶ä¸å¯è¾¾

**è§£å†³æ–¹æ³•**ï¼š
```yaml
# å¢åŠ  curl è¶…æ—¶æ—¶é—´åˆ° 90 ç§’
response=$(curl -s -o /dev/null -w "%{http_code}" --max-time 90 https://kiro-travel.onrender.com/api/health || echo "000")
```

### Q3: å¯ä»¥ ping é¦–é¡µè€Œä¸æ˜¯ /api/health å—ï¼Ÿ

**A**: å¯ä»¥ï¼Œä½†ä¸æ¨èï¼š
- âŒ é¦–é¡µé€šå¸¸åŒ…å«å¤§é‡èµ„æºï¼ˆCSSã€JSã€å›¾ç‰‡ï¼‰ï¼Œæ¶ˆè€—æ›´å¤šæµé‡
- âŒ é¦–é¡µåŠ è½½æ…¢ï¼Œå¯èƒ½å¯¼è‡´ curl è¶…æ—¶
- âœ… `/api/health` ç«¯ç‚¹è½»é‡å¿«é€Ÿï¼Œä¸“ä¸ºå¥åº·æ£€æŸ¥è®¾è®¡

### Q4: Actions ä¼šæ¶ˆè€—å¤šå°‘ GitHub é…é¢ï¼Ÿ

**A**: éå¸¸å°‘ï¼ˆè§ä¸Šæ–¹"å…è´¹é¢åº¦"ç« èŠ‚ï¼‰ï¼š
- æ¯æœˆçº¦ 720 åˆ†é’Ÿ
- è¿œä½äº 2000 åˆ†é’Ÿå…è´¹é¢åº¦
- å®Œå…¨å¤Ÿç”¨ï¼Œæ— éœ€æ‹…å¿ƒ

### Q5: å¯ä»¥å…³é—­ Actions å—ï¼Ÿ

**A**: å¯ä»¥ä¸´æ—¶ç¦ç”¨ï¼š
1. è¿›å…¥ Actions â†’ Keep Render Service Alive
2. ç‚¹å‡»å³ä¸Šè§’ "..." èœå•
3. é€‰æ‹© "Disable workflow"

**é‡æ–°å¯ç”¨**ï¼š
1. åŒæ ·ä½ç½®é€‰æ‹© "Enable workflow"

---

## ğŸ¯ æ•ˆæœéªŒè¯

### 1. æŸ¥çœ‹ Actions æ‰§è¡Œæ—¥å¿—

**é¢„æœŸè¾“å‡º**ï¼š
```
ğŸ”„ Pinging Render service at Thu Dec 16 10:00:00 UTC 2025
âœ… Service is alive! HTTP Status: 200
â° Next ping in 10 minutes
ğŸ“Š Ping completed at Thu Dec 16 10:00:05 UTC 2025
ğŸŒ Target: https://kiro-travel.onrender.com/api/health
```

### 2. æŸ¥çœ‹ Render Dashboard

1. ç™»å½• Render Dashboard
2. è¿›å…¥ä½ çš„æœåŠ¡
3. æŸ¥çœ‹ "Events" æ ‡ç­¾
4. åº”è¯¥çœ‹åˆ°æŒç»­çš„ HTTP è¯·æ±‚æ—¥å¿—

### 3. æµ‹è¯•å†·å¯åŠ¨æ—¶é—´

**æ­¥éª¤**ï¼š
1. æ‰‹åŠ¨æš‚åœæœåŠ¡ 15 åˆ†é’Ÿ
2. è®¿é—®ç½‘ç«™ï¼Œè®°å½•å¯åŠ¨æ—¶é—´
3. å¯ç”¨ Actions åï¼ŒæœåŠ¡åº”å§‹ç»ˆä¿æŒå”¤é†’
4. å†æ¬¡è®¿é—®ï¼Œåº”è¯¥ < 1 ç§’å“åº”

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹ Actions æ—¥å¿—**ï¼šä»“åº“ â†’ Actions â†’ ç‚¹å‡»å¤±è´¥çš„ä»»åŠ¡æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
2. **æ£€æŸ¥ Render çŠ¶æ€**ï¼šhttps://status.render.com/
3. **æ£€æŸ¥ GitHub çŠ¶æ€**ï¼šhttps://www.githubstatus.com/
4. **æäº¤ Issue**ï¼š[GitHub Issues](https://github.com/your-username/kiro-travel/issues)

---

## ğŸ‰ æ€»ç»“

âœ… **GitHub Actions ä¿æ´»æ–¹æ¡ˆä¼˜åŠ¿**ï¼š
- å®Œå…¨å…è´¹ï¼ˆGitHub å…è´¹é¢åº¦å……è¶³ï¼‰
- è‡ªåŠ¨åŒ–æ‰§è¡Œï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤
- è¯¦ç»†æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•
- æ”¯æŒæ‰‹åŠ¨è§¦å‘
- é…åˆ UptimeRobot åŒé‡ä¿éšœ

âœ… **é€‚ç”¨åœºæ™¯**ï¼š
- é¡¹ç›®æ‰˜ç®¡åœ¨ GitHub
- éœ€è¦é•¿æœŸä¿æŒ Render æœåŠ¡å”¤é†’
- å¸Œæœ›æŸ¥çœ‹è¯¦ç»†æ‰§è¡Œæ—¥å¿—
- éœ€è¦çµæ´»çš„å®šæ—¶é…ç½®

ğŸš€ **ä¸‹ä¸€æ­¥**ï¼š
1. å°†ä»£ç æ¨é€åˆ° GitHub
2. ç­‰å¾… 10 åˆ†é’Ÿåæ£€æŸ¥ Actions æ˜¯å¦è‡ªåŠ¨æ‰§è¡Œ
3. å¯é€‰ï¼šé…åˆ UptimeRobot ä½¿ç”¨ï¼ˆè§ [docs/13.UptimeRobotè®¾ç½®æŒ‡å—.md](./13.UptimeRobotè®¾ç½®æŒ‡å—.md)ï¼‰

---

**ç›¸å…³æ–‡æ¡£**ï¼š
- [éƒ¨ç½²å¹³å°å¯¹æ¯”åˆ†æ](./11.éƒ¨ç½²å¹³å°å¯¹æ¯”åˆ†æ.md)
- [Render éƒ¨ç½²å¿«é€ŸæŒ‡å—](./12.Renderéƒ¨ç½²å¿«é€ŸæŒ‡å—.md)
- [UptimeRobot è®¾ç½®æŒ‡å—](./13.UptimeRobotè®¾ç½®æŒ‡å—.md)
